
- [概览](#概览)
- [支持平台](#支持平台)
- [快速开始](#快速开始)
- [变更记录](#变更记录)
  - [JDK 17](#jdk-17)
  - [JDK 16](#jdk-16)
  - [JDK 15](#jdk-15)
  - [JDK 14](#jdk-14)
  - [JDK 13](#jdk-13)
  - [JDK 12](#jdk-12)
  - [JDK 11](#jdk-11)
- [FAQ](#faq)
  - [ZGC 中的“Z”表示什么？](#zgc-中的z表示什么)
  - [发音是 "zed gee see" 还是 "zee gee see"?](#发音是-zed-gee-see-还是-zee-gee-see)
- [参考资料](#参考资料)

# 概览

**The Z Garbage Collector**, also known as **ZGC**, is a scalable low latency garbage collector designed to meet the following goals:

- **Sub-millisecond** max pause times
- Pause times **do not** increase with the heap, live-set or root-set size
- Handle heaps ranging from a **8MB** to **16TB** in size

ZGC was initially introduced as an experimental feature in JDK 11, and was declared **Production Ready** in JDK 15.

At a glance, ZGC is:

- Concurrent
- Region-based
- Compacting
- NUMA-aware
- Using colored pointers
- Using load barriers

At its core, ZGC is a **concurrent** garbage collector, meaning all heavy lifting work is done while **Java threads continue to execute**. This greatly limits the impact garbage collection will have on your application's response time.

This [OpenJDK](http://openjdk.java.net/) project is sponsored by the [HotSpot Group](http://openjdk.java.net/groups/hotspot/).

# 支持平台

![](http://yano.oss-cn-beijing.aliyuncs.com/blog/20211207193738.png)

# 快速开始

通过下面的参数，能够启用 ZGC。

```
-XX:+UseZGC -Xmx<size> -Xlog:gc
```

如果想获取更多详细 log，可以使用下面的参数：

```
-XX:+UseZGC -Xmx<size> -Xlog:gc*
```

# 变更记录

##  JDK 17

- Dynamic Number of GC threads
- Reduced mark stack memory usage
- macOS/aarch64 support
- GarbageCollectorMXBeans for both pauses and cycles
- Fast JVM termination

##  JDK 16

- Concurrent Thread Stack Scanning ([JEP 376](http://openjdk.java.net/jeps/376))
- Support for in-place relocation
- Performance improvements (allocation/initialization of forwarding tables, etc)

##  JDK 15

- Production ready ([JEP 377](http://openjdk.java.net/jeps/377))
- Improved NUMA awareness
- Improved allocation concurrency
- Support for Class Data Sharing (CDS)
- Support for placing the heap on NVRAM
- Support for compressed class pointers
- Support for incremental uncommit
- Fixed support for transparent huge pages
- Additional JFR events

##  JDK 14

- macOS support ([JEP 364](http://openjdk.java.net/jeps/364))
- Windows support ([JEP 365](http://openjdk.java.net/jeps/365))
- Support for tiny/small heaps (down to 8M)
- Support for JFR leak profiler
- Support for limited and discontiguous address space
- Parallel pre-touch (when using -XX:+AlwaysPreTouch)
- Performance improvements (clone intrinsic, etc)
- Stability improvements

##  JDK 13

- Increased max heap size from 4TB to 16TB
- Support for uncommitting unused memory ([JEP 351](http://openjdk.java.net/jeps/351))
- Support for -XX:SoftMaxHeapSIze
- Support for the Linux/AArch64 platform
- Reduced Time-To-Safepoint

##  JDK 12

- Support for concurrent class unloading
- Further pause time reductions

## JDK 11

- Initial version of ZGC
- Does not support class unloading (using -XX:+ClassUnloading has no effect)

# FAQ

##  ZGC 中的“Z”表示什么？

ZGC 只是一个名字，Z 没有什么特殊含义。

##  发音是 "zed gee see" 还是 "zee gee see"?

没有规定，两者都可以。

# 参考资料

- [https://www.baeldung.com/jvm-zgc-garbage-collector](https://www.baeldung.com/jvm-zgc-garbage-collector)
- [https://wiki.openjdk.java.net/display/zgc/Main#Main-JDK17](https://wiki.openjdk.java.net/display/zgc/Main#Main-JDK17)
- [新一代垃圾回收器ZGC的探索与实践](https://tech.meituan.com/2020/08/06/new-zgc-practice-in-meituan.html)